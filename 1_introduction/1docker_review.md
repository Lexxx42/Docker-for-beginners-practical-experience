# Для чего нужны контейнеры

## Как я познакомился с докером.

В одном из моих педыдущий проектов было требование настроить сквозной стек, включающий различные технологии:

+ веб-сервер, использующий node js
+ БД, такую как mongoDB
+ система обмена сообщениями Redis
+ оркестрация с помощью Ansible

Из-за того, что компоненты были разнородные мы столкнулись с множеством проблем при разработке и поддержке этого
приложения.

Во-первых, их совместимость с базовой операционной системой. Мы должны были обеспечить чтобы все эти сервисы были
совместимы с версиями ОС, которую мы планировали использовать. Получалось что некоторые версии этих компонентов были
несовместимы с ОС. Нам приходилось останавливаться и находить другую ОС совместимую со всеми этими службами.

Во-вторых, нам нужно было быть уверенными в совместимости сервисов и библиотек с зависомостями ОС. У нас были проблемы,
когда для одной службы нужна была одна версия зависимой библиотеки, а для другой службы - другая.

Со временем архитектура нашего приложения менялась. Нам пришлось обновить компоненты до более новой версии. Поменять БД
и т.д. Каждый раз, когда что-то менялось, нам приходилось проходить один и тот же процесс проверки совместимости между
этими различными компонентами и базовой инфраструктурой.

Эта проблема с матрицой совместимости обычно называется "матрицой из ада".

Далее каждый раз, когда у нас появлялся новый разработчик, нам было действительно сложно создать новую среду. Новым
разработчикам приходилось следовать большому набору инструкций и запускать сотни команд, чтобы наконец настроить свою
среду. Они должны были убедиться, что используют правильную ОС, правильную версию каждой из компонент. И каждый
разработчик должен был настраивать все это каждый раз самостоятельно.

У нас также были разные среды для разработки, тестирования и продакшена.

Одному разработчику было удобно использовать одну ОС, другим - другую. Поэтому мы не могли гарантировать, что созданное
приложение будет работать одинаково в разных средах.

И так все это значительно усложнило нам жизнь в разработке, создании и доставке приложения.

Нам нужно было что-то, что могло помочь нам в решении проблем с совместимостью. Что-то что позволит нам изменять или
заменять эти компоненты не затрагивая другие компоненты и даже изменять базовые ОС по мере необходимости.

И этот поиск привел меня к Docker.
В докер я мог запускать каждый компонент отдельно с своими собственными библиотеками и зависимостями от одной и той же
виртуальной машины и ОС. Все упаковывалось в отдельное окружение - контейнер.

Нам нужно было один раз собрать конфигурацию докер и теперь все наши разработчики могли начать работу с простой команды
запуска докера.

Не зависимо от того, какую ОС они используют все, что им нужно было сделать - это убедиться, что и их системах
установлен докер.

## Так что же такое контейнер?

Контейнер - это полностью изолированные среды.

В них свои процессы и службы. Собственные сетевые интерфейсы, собстевнные средства монтирования.

Это похоже на виртуальные машины. За исключением того, что все они используют одно ядро ОС.

Мы немного рассмотрим, что это значит.

Также важно отметить, что контейнеры не новость в докер. Контейнеры существовали около 10 лет.

Рассмотрим некоторые из типов контейнера.

Докер использует контейнеры lxc, настроить эти контейнерные среды сложно поскольку они очень низкого уровня.

Именно здесь докер предлагает инструменты более высокого уровня с несколькими мощными функциями, которые делают его
действительно легким для таких конечных пользователей как мы.

Чтобы понять как работает докер давай сначала вернемся к некоторым основным концепциям ОС.

Если ты посмотришь на такие ОС как юбунта, федора или центос, все они состоят из двух вещей
